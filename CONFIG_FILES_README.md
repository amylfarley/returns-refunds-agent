# Configuration Files Guide

This directory contains example configuration files to help you understand the structure of the configuration files generated during deployment.

## ‚ö†Ô∏è Important Security Notice

**NEVER commit actual configuration files to Git!**

The `.gitignore` file is configured to exclude all `*_config.json` files (without `.example` extension) to prevent accidental commits of sensitive information.

## üìÅ Example Files

These example files show the structure and format of configuration files:

| Example File | Actual File | Contains Sensitive Data? |
|--------------|-------------|--------------------------|
| `kb_config.json.example` | `kb_config.json` | No |
| `memory_config.json.example` | `memory_config.json` | No |
| `cognito_config.json.example` | `cognito_config.json` | ‚ö†Ô∏è **YES** (client_secret) |
| `gateway_config.json.example` | `gateway_config.json` | No |
| `gateway_role_config.json.example` | `gateway_role_config.json` | No |
| `lambda_config.json.example` | `lambda_config.json` | No |
| `runtime_execution_role_config.json.example` | `runtime_execution_role_config.json` | No |
| `runtime_config.json.example` | `runtime_config.json` | No |

## üîê Sensitive Information

### cognito_config.json
**Contains**: `client_secret` - OAuth2 client secret for gateway authentication

**Why it's sensitive**: This secret allows authentication to your gateway. If exposed, unauthorized users could invoke your gateway tools.

**Protection**: 
- Never commit to Git
- Store in AWS Secrets Manager for production
- Rotate regularly
- Use environment variables in CI/CD

## üìù How to Use Example Files

### Option 1: Copy and Modify (Not Recommended)
```bash
# Copy example file
cp cognito_config.json.example cognito_config.json

# Edit with your actual values
nano cognito_config.json
```

### Option 2: Let Scripts Generate (Recommended)
The deployment scripts automatically create these files with correct values:

```bash
# Scripts that generate config files:
python3 03_create_memory.py          # ‚Üí memory_config.json
python3 08_create_cognito.py         # ‚Üí cognito_config.json
python3 09_create_gateway_role.py    # ‚Üí gateway_role_config.json
python3 10_create_lambda.py          # ‚Üí lambda_config.json
python3 11_create_gateway.py         # ‚Üí gateway_config.json
python3 16_create_runtime_role.py    # ‚Üí runtime_execution_role_config.json
python3 19_deploy_agent.py           # ‚Üí runtime_config.json
```

## üîç Configuration File Details

### kb_config.json
- **Purpose**: Knowledge Base connection details
- **Generated by**: Pre-existing (from CloudFormation stack)
- **Used by**: All agent scripts that need to retrieve policy documents

### memory_config.json
- **Purpose**: AgentCore Memory resource details
- **Generated by**: `03_create_memory.py`
- **Used by**: Memory-enabled agents for storing/retrieving customer data

### cognito_config.json ‚ö†Ô∏è
- **Purpose**: OAuth2 authentication credentials
- **Generated by**: `08_create_cognito.py`
- **Used by**: Gateway authentication
- **Sensitive**: Contains `client_secret`

### gateway_config.json
- **Purpose**: Gateway endpoint and identifier
- **Generated by**: `11_create_gateway.py`
- **Used by**: Agents that invoke gateway tools

### gateway_role_config.json
- **Purpose**: IAM role for gateway execution
- **Generated by**: `09_create_gateway_role.py`
- **Used by**: Gateway creation script

### lambda_config.json
- **Purpose**: Lambda function details and tool schema
- **Generated by**: `10_create_lambda.py`
- **Used by**: Gateway target registration

### runtime_execution_role_config.json
- **Purpose**: IAM role for runtime agent execution
- **Generated by**: `16_create_runtime_role.py`
- **Used by**: Runtime deployment script

### runtime_config.json
- **Purpose**: Deployed agent details and ARN
- **Generated by**: `19_deploy_agent.py`
- **Used by**: Monitoring and invocation scripts

## üõ°Ô∏è Security Best Practices

### For Development
1. Use the generated config files locally
2. Never commit actual config files
3. Add `*_config.json` to `.gitignore` (already done)
4. Use example files for documentation only

### For Production
1. Store sensitive values in AWS Secrets Manager
2. Use IAM roles instead of credentials where possible
3. Rotate secrets regularly
4. Enable CloudTrail for audit logging
5. Use environment variables in CI/CD pipelines

### For Team Collaboration
1. Share example files in Git
2. Document how to generate actual files
3. Use AWS SSM Parameter Store for shared configs
4. Implement least privilege access

## üìö Related Documentation

- [DEPLOYMENT_CHECKLIST.md](DEPLOYMENT_CHECKLIST.md) - Step-by-step deployment guide
- [QUICK_REFERENCE.md](QUICK_REFERENCE.md) - Quick commands and reference
- [README.md](README.md) - Complete project documentation

## ‚ùì FAQ

**Q: Can I commit the example files?**  
A: Yes! Example files (with `.example` extension) are safe to commit.

**Q: What if I accidentally commit a real config file?**  
A: 
1. Remove it from Git history: `git filter-branch` or `git filter-repo`
2. Rotate all secrets immediately (especially Cognito client_secret)
3. Update `.gitignore` to prevent future commits

**Q: How do I share configs with my team?**  
A: Use AWS Secrets Manager or SSM Parameter Store, not Git.

**Q: Can I use these files in CI/CD?**  
A: Generate them dynamically in CI/CD using AWS CLI or store in secure CI/CD secrets.

---

**Last Updated**: 2026-02-20  
**Version**: 3.1
